{"version":3,"file":"main-ghvkSbJu.js","sources":["../../gradepad/jsScripts/pwa.js"],"sourcesContent":["// Progressive Web App functionality\r\nclass PWAManager {\r\n  constructor() {\r\n    this.init();\r\n  }\r\n\r\n  async init() {\r\n    // Register service worker\r\n    if ('serviceWorker' in navigator) {\r\n      try {\r\n        const registration = await navigator.serviceWorker.register('/sw.js');\r\n        console.log('‚úÖ Service Worker registered:', registration);\r\n        \r\n        // Handle updates\r\n        registration.addEventListener('updatefound', () => {\r\n          const newWorker = registration.installing;\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              this.showUpdateNotification();\r\n            }\r\n          });\r\n        });\r\n      } catch (error) {\r\n        console.error('‚ùå Service Worker registration failed:', error);\r\n      }\r\n    }\r\n\r\n    // Handle install prompt\r\n    this.setupInstallPrompt();\r\n    \r\n    // Setup offline detection\r\n    this.setupOfflineDetection();\r\n  }\r\n\r\n  setupInstallPrompt() {\r\n    let deferredPrompt;\r\n    \r\n    window.addEventListener('beforeinstallprompt', (e) => {\r\n      e.preventDefault();\r\n      deferredPrompt = e;\r\n      \r\n      // Show install button\r\n      this.showInstallButton(deferredPrompt);\r\n    });\r\n\r\n    window.addEventListener('appinstalled', () => {\r\n      console.log('‚úÖ GradePad installed successfully!');\r\n      this.hideInstallButton();\r\n    });\r\n  }\r\n\r\n  showInstallButton(deferredPrompt) {\r\n    // Create install button\r\n    const installBtn = document.createElement('button');\r\n    installBtn.id = 'install-btn';\r\n    installBtn.innerHTML = 'üì± Install GradePad';\r\n    installBtn.style.cssText = `\r\n      position: fixed;\r\n      bottom: 20px;\r\n      right: 20px;\r\n      background: #2196F3;\r\n      color: white;\r\n      border: none;\r\n      padding: 12px 20px;\r\n      border-radius: 8px;\r\n      cursor: pointer;\r\n      font-size: 14px;\r\n      box-shadow: 0 4px 12px rgba(0,0,0,0.2);\r\n      z-index: 1000;\r\n    `;\r\n\r\n    installBtn.addEventListener('click', async () => {\r\n      if (deferredPrompt) {\r\n        deferredPrompt.prompt();\r\n        const { outcome } = await deferredPrompt.userChoice;\r\n        console.log('Install prompt result:', outcome);\r\n        this.hideInstallButton();\r\n      }\r\n    });\r\n\r\n    document.body.appendChild(installBtn);\r\n  }\r\n\r\n  hideInstallButton() {\r\n    const installBtn = document.getElementById('install-btn');\r\n    if (installBtn) {\r\n      installBtn.remove();\r\n    }\r\n  }\r\n\r\n  setupOfflineDetection() {\r\n    const updateOnlineStatus = () => {\r\n      const status = navigator.onLine ? 'online' : 'offline';\r\n      console.log(`üåê Status: ${status}`);\r\n      \r\n      if (!navigator.onLine) {\r\n        this.showOfflineNotification();\r\n      } else {\r\n        this.hideOfflineNotification();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('online', updateOnlineStatus);\r\n    window.addEventListener('offline', updateOnlineStatus);\r\n    updateOnlineStatus();\r\n  }\r\n\r\n  showOfflineNotification() {\r\n    if (document.getElementById('offline-notification')) return;\r\n    \r\n    const notification = document.createElement('div');\r\n    notification.id = 'offline-notification';\r\n    notification.innerHTML = 'üì° You\\'re offline - some features may be limited';\r\n    notification.style.cssText = `\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      background: #ff9800;\r\n      color: white;\r\n      text-align: center;\r\n      padding: 12px;\r\n      font-size: 14px;\r\n      z-index: 1000;\r\n    `;\r\n    \r\n    document.body.appendChild(notification);\r\n  }\r\n\r\n  hideOfflineNotification() {\r\n    const notification = document.getElementById('offline-notification');\r\n    if (notification) {\r\n      notification.remove();\r\n    }\r\n  }\r\n\r\n  showUpdateNotification() {\r\n    const notification = document.createElement('div');\r\n    notification.id = 'update-notification';\r\n    notification.innerHTML = `\r\n      <div style=\"display: flex; justify-content: space-between; align-items: center; max-width: 600px; margin: 0 auto;\">\r\n        <span>üîÑ New version available!</span>\r\n        <button onclick=\"window.location.reload()\" style=\"background: white; color: #2196F3; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;\">\r\n          Update\r\n        </button>\r\n      </div>\r\n    `;\r\n    notification.style.cssText = `\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      background: #2196F3;\r\n      color: white;\r\n      padding: 12px;\r\n      font-size: 14px;\r\n      z-index: 1001;\r\n      box-shadow: 0 2px 8px rgba(0,0,0,0.2);\r\n    `;\r\n    \r\n    document.body.appendChild(notification);\r\n  }\r\n}\r\n\r\n// Initialize PWA when DOM is loaded\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  new PWAManager();\r\n});\r\n"],"names":["PWAManager","registration","newWorker","error","deferredPrompt","installBtn","outcome","updateOnlineStatus","status","notification"],"mappings":"6TACA,MAAMA,CAAW,CACf,aAAc,CACZ,KAAK,KAAI,CACX,CAEA,MAAM,MAAO,CAEX,GAAI,kBAAmB,UACrB,GAAI,CACF,MAAMC,EAAe,MAAM,UAAU,cAAc,SAAS,QAAQ,EACpE,QAAQ,IAAI,+BAAgCA,CAAY,EAGxDA,EAAa,iBAAiB,cAAe,IAAM,CACjD,MAAMC,EAAYD,EAAa,WAC/BC,EAAU,iBAAiB,cAAe,IAAM,CAC1CA,EAAU,QAAU,aAAe,UAAU,cAAc,YAC7D,KAAK,uBAAsB,CAE/B,CAAC,CACH,CAAC,CACH,OAASC,EAAO,CACd,QAAQ,MAAM,wCAAyCA,CAAK,CAC9D,CAIF,KAAK,mBAAkB,EAGvB,KAAK,sBAAqB,CAC5B,CAEA,oBAAqB,CACnB,IAAIC,EAEJ,OAAO,iBAAiB,sBAAwB,GAAM,CACpD,EAAE,eAAc,EAChBA,EAAiB,EAGjB,KAAK,kBAAkBA,CAAc,CACvC,CAAC,EAED,OAAO,iBAAiB,eAAgB,IAAM,CAC5C,QAAQ,IAAI,oCAAoC,EAChD,KAAK,kBAAiB,CACxB,CAAC,CACH,CAEA,kBAAkBA,EAAgB,CAEhC,MAAMC,EAAa,SAAS,cAAc,QAAQ,EAClDA,EAAW,GAAK,cAChBA,EAAW,UAAY,sBACvBA,EAAW,MAAM,QAAU,2TAe3BA,EAAW,iBAAiB,QAAS,SAAY,CAC/C,GAAID,EAAgB,CAClBA,EAAe,OAAM,EACrB,KAAM,CAAE,QAAAE,CAAO,EAAK,MAAMF,EAAe,WACzC,QAAQ,IAAI,yBAA0BE,CAAO,EAC7C,KAAK,kBAAiB,CACxB,CACF,CAAC,EAED,SAAS,KAAK,YAAYD,CAAU,CACtC,CAEA,mBAAoB,CAClB,MAAMA,EAAa,SAAS,eAAe,aAAa,EACpDA,GACFA,EAAW,OAAM,CAErB,CAEA,uBAAwB,CACtB,MAAME,EAAqB,IAAM,CAC/B,MAAMC,EAAS,UAAU,OAAS,SAAW,UAC7C,QAAQ,IAAI,cAAc,OAAAA,EAAQ,EAE7B,UAAU,OAGb,KAAK,wBAAuB,EAF5B,KAAK,wBAAuB,CAIhC,EAEA,OAAO,iBAAiB,SAAUD,CAAkB,EACpD,OAAO,iBAAiB,UAAWA,CAAkB,EACrDA,GACF,CAEA,yBAA0B,CACxB,GAAI,SAAS,eAAe,sBAAsB,EAAG,OAErD,MAAME,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,GAAK,uBAClBA,EAAa,UAAY,mDACzBA,EAAa,MAAM,QAAU,iOAa7B,SAAS,KAAK,YAAYA,CAAY,CACxC,CAEA,yBAA0B,CACxB,MAAMA,EAAe,SAAS,eAAe,sBAAsB,EAC/DA,GACFA,EAAa,OAAM,CAEvB,CAEA,wBAAyB,CACvB,MAAMA,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,GAAK,sBAClBA,EAAa,UAAY,6YAQzBA,EAAa,MAAM,QAAU,oPAa7B,SAAS,KAAK,YAAYA,CAAY,CACxC,CACF,CAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,IAAIT,CACN,CAAC"}