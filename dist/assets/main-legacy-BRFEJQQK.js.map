{"version":3,"file":"main-legacy-BRFEJQQK.js","sources":["../../gradepad/jsScripts/pwa.js"],"sourcesContent":["// Progressive Web App functionality\r\nclass PWAManager {\r\n  constructor() {\r\n    this.init();\r\n  }\r\n\r\n  async init() {\r\n    // Register service worker\r\n    if ('serviceWorker' in navigator) {\r\n      try {\r\n        const registration = await navigator.serviceWorker.register('/sw.js');\r\n        console.log('‚úÖ Service Worker registered:', registration);\r\n        \r\n        // Handle updates\r\n        registration.addEventListener('updatefound', () => {\r\n          const newWorker = registration.installing;\r\n          newWorker.addEventListener('statechange', () => {\r\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\r\n              this.showUpdateNotification();\r\n            }\r\n          });\r\n        });\r\n      } catch (error) {\r\n        console.error('‚ùå Service Worker registration failed:', error);\r\n      }\r\n    }\r\n\r\n    // Handle install prompt\r\n    this.setupInstallPrompt();\r\n    \r\n    // Setup offline detection\r\n    this.setupOfflineDetection();\r\n  }\r\n\r\n  setupInstallPrompt() {\r\n    let deferredPrompt;\r\n    \r\n    window.addEventListener('beforeinstallprompt', (e) => {\r\n      e.preventDefault();\r\n      deferredPrompt = e;\r\n      \r\n      // Show install button\r\n      this.showInstallButton(deferredPrompt);\r\n    });\r\n\r\n    window.addEventListener('appinstalled', () => {\r\n      console.log('‚úÖ GradePad installed successfully!');\r\n      this.hideInstallButton();\r\n    });\r\n  }\r\n\r\n  showInstallButton(deferredPrompt) {\r\n    // Create install button\r\n    const installBtn = document.createElement('button');\r\n    installBtn.id = 'install-btn';\r\n    installBtn.innerHTML = 'üì± Install GradePad';\r\n    installBtn.style.cssText = `\r\n      position: fixed;\r\n      bottom: 20px;\r\n      right: 20px;\r\n      background: #2196F3;\r\n      color: white;\r\n      border: none;\r\n      padding: 12px 20px;\r\n      border-radius: 8px;\r\n      cursor: pointer;\r\n      font-size: 14px;\r\n      box-shadow: 0 4px 12px rgba(0,0,0,0.2);\r\n      z-index: 1000;\r\n    `;\r\n\r\n    installBtn.addEventListener('click', async () => {\r\n      if (deferredPrompt) {\r\n        deferredPrompt.prompt();\r\n        const { outcome } = await deferredPrompt.userChoice;\r\n        console.log('Install prompt result:', outcome);\r\n        this.hideInstallButton();\r\n      }\r\n    });\r\n\r\n    document.body.appendChild(installBtn);\r\n  }\r\n\r\n  hideInstallButton() {\r\n    const installBtn = document.getElementById('install-btn');\r\n    if (installBtn) {\r\n      installBtn.remove();\r\n    }\r\n  }\r\n\r\n  setupOfflineDetection() {\r\n    const updateOnlineStatus = () => {\r\n      const status = navigator.onLine ? 'online' : 'offline';\r\n      console.log(`üåê Status: ${status}`);\r\n      \r\n      if (!navigator.onLine) {\r\n        this.showOfflineNotification();\r\n      } else {\r\n        this.hideOfflineNotification();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('online', updateOnlineStatus);\r\n    window.addEventListener('offline', updateOnlineStatus);\r\n    updateOnlineStatus();\r\n  }\r\n\r\n  showOfflineNotification() {\r\n    if (document.getElementById('offline-notification')) return;\r\n    \r\n    const notification = document.createElement('div');\r\n    notification.id = 'offline-notification';\r\n    notification.innerHTML = 'üì° You\\'re offline - some features may be limited';\r\n    notification.style.cssText = `\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      background: #ff9800;\r\n      color: white;\r\n      text-align: center;\r\n      padding: 12px;\r\n      font-size: 14px;\r\n      z-index: 1000;\r\n    `;\r\n    \r\n    document.body.appendChild(notification);\r\n  }\r\n\r\n  hideOfflineNotification() {\r\n    const notification = document.getElementById('offline-notification');\r\n    if (notification) {\r\n      notification.remove();\r\n    }\r\n  }\r\n\r\n  showUpdateNotification() {\r\n    const notification = document.createElement('div');\r\n    notification.id = 'update-notification';\r\n    notification.innerHTML = `\r\n      <div style=\"display: flex; justify-content: space-between; align-items: center; max-width: 600px; margin: 0 auto;\">\r\n        <span>üîÑ New version available!</span>\r\n        <button onclick=\"window.location.reload()\" style=\"background: white; color: #2196F3; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;\">\r\n          Update\r\n        </button>\r\n      </div>\r\n    `;\r\n    notification.style.cssText = `\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      right: 0;\r\n      background: #2196F3;\r\n      color: white;\r\n      padding: 12px;\r\n      font-size: 14px;\r\n      z-index: 1001;\r\n      box-shadow: 0 2px 8px rgba(0,0,0,0.2);\r\n    `;\r\n    \r\n    document.body.appendChild(notification);\r\n  }\r\n}\r\n\r\n// Initialize PWA when DOM is loaded\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  new PWAManager();\r\n});\r\n"],"names":["PWAManager","constructor","this","init","navigator","registration","serviceWorker","register","console","log","addEventListener","newWorker","installing","state","controller","showUpdateNotification","error","setupInstallPrompt","setupOfflineDetection","deferredPrompt","window","e","preventDefault","showInstallButton","hideInstallButton","installBtn","document","createElement","id","innerHTML","style","cssText","async","prompt","outcome","userChoice","body","appendChild","getElementById","remove","updateOnlineStatus","status","onLine","hideOfflineNotification","showOfflineNotification","notification"],"mappings":"4TACA,MAAMA,EACJC,WAAAA,GACEC,KAAKC,MACP,CAEA,UAAMA,GAEJ,GAAI,kBAAmBC,UACrB,IACE,MAAMC,QAAqBD,UAAUE,cAAcC,SAAS,UAC5DC,QAAQC,IAAI,+BAAgCJ,GAG5CA,EAAaK,iBAAiB,cAAe,KAC3C,MAAMC,EAAYN,EAAaO,WAC/BD,EAAUD,iBAAiB,cAAe,KAChB,cAApBC,EAAUE,OAAyBT,UAAUE,cAAcQ,YAC7DZ,KAAKa,4BAIb,CAAE,MAAOC,GACPR,QAAQQ,MAAM,wCAAyCA,EACzD,CAIFd,KAAKe,qBAGLf,KAAKgB,uBACP,CAEAD,kBAAAA,GACE,IAAIE,EAEJC,OAAOV,iBAAiB,sBAAwBW,IAC9CA,EAAEC,iBACFH,EAAiBE,EAGjBnB,KAAKqB,kBAAkBJ,KAGzBC,OAAOV,iBAAiB,eAAgB,KACtCF,QAAQC,IAAI,sCACZP,KAAKsB,qBAET,CAEAD,iBAAAA,CAAkBJ,GAEhB,MAAMM,EAAaC,SAASC,cAAc,UAC1CF,EAAWG,GAAK,cAChBH,EAAWI,UAAY,sBACvBJ,EAAWK,MAAMC,QAAU,2TAe3BN,EAAWf,iBAAiB,QAASsB,UACnC,GAAIb,EAAgB,CAClBA,EAAec,SACf,MAAMC,QAAEA,SAAkBf,EAAegB,WACzC3B,QAAQC,IAAI,yBAA0ByB,GACtChC,KAAKsB,mBACP,IAGFE,SAASU,KAAKC,YAAYZ,EAC5B,CAEAD,iBAAAA,GACE,MAAMC,EAAaC,SAASY,eAAe,eACvCb,GACFA,EAAWc,QAEf,CAEArB,qBAAAA,GACE,MAAMsB,EAAqBA,KACzB,MAAMC,EAASrC,UAAUsC,OAAS,SAAW,UAC7ClC,QAAQC,IAAI,cAAcgC,KAErBrC,UAAUsC,OAGbxC,KAAKyC,0BAFLzC,KAAK0C,2BAMTxB,OAAOV,iBAAiB,SAAU8B,GAClCpB,OAAOV,iBAAiB,UAAW8B,GACnCA,GACF,CAEAI,uBAAAA,GACE,GAAIlB,SAASY,eAAe,wBAAyB,OAErD,MAAMO,EAAenB,SAASC,cAAc,OAC5CkB,EAAajB,GAAK,uBAClBiB,EAAahB,UAAY,mDACzBgB,EAAaf,MAAMC,QAAU,iOAa7BL,SAASU,KAAKC,YAAYQ,EAC5B,CAEAF,uBAAAA,GACE,MAAME,EAAenB,SAASY,eAAe,wBACzCO,GACFA,EAAaN,QAEjB,CAEAxB,sBAAAA,GACE,MAAM8B,EAAenB,SAASC,cAAc,OAC5CkB,EAAajB,GAAK,sBAClBiB,EAAahB,UAAY,6YAQzBgB,EAAaf,MAAMC,QAAU,oPAa7BL,SAASU,KAAKC,YAAYQ,EAC5B,EAIFnB,SAAShB,iBAAiB,mBAAoB,KAC5C,IAAIV"}